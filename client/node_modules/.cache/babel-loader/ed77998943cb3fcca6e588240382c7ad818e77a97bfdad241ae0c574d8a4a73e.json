{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios, { all } from 'axios';\nimport { useFetch } from '../../services/useFetch';\nimport { useSelector } from \"react-redux\";\nconst API_URL_BASE = \"http://localhost:3000/\";\nconst API_URL = \"http://localhost:3000/projects\";\nconst API_URL_ODS = \"http://localhost:3000/ods\";\nconst API_URL_LOCATIONS = \"http://localhost:3000/locations\";\nconst API_URL_NEEDS = \"http://localhost:3000/needs\";\nexport const projectsSlice = createSlice({\n  name: 'projects',\n  initialState: {\n    allProjects: [{}],\n    allODSs: [],\n    allLocations: [],\n    allNeeds: []\n  },\n  reducers: {\n    loadProjects: (state, action) => {\n      state.allProjects = action.payload;\n    },\n    loadODSs: (state, action) => {\n      state.allODSs = action.payload;\n    },\n    loadLocations: (state, action) => {\n      state.allLocations = action.payload;\n    },\n    loadNeeds: (state, action) => {\n      state.allNeeds = action.payload;\n    }\n  }\n});\nexport default projectsSlice.reducer;\nconst {\n  loadProjects,\n  loadODSs,\n  loadLocations,\n  loadNeeds\n} = projectsSlice.actions;\nexport const selectAllProjects = state => state.projects.allProjects;\nexport const selectAllODS = state => state.projects.allODSs;\nexport const selectAllLocations = state => state.projects.allLocations;\nexport const selectAllNeeds = state => state.projects.allNeeds;\n\n/* Action to load all projects from DataBase*/\nexport const loadAllProjects = () => {\n  var _s = $RefreshSig$();\n  return _s(async dispatch => {\n    _s();\n    const allProjectsRes = await useFetch(API_URL);\n    dispatch(loadProjects(allProjectsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all needs*/\nexport const loadAllNeeds = () => {\n  var _s2 = $RefreshSig$();\n  return _s2(async dispatch => {\n    _s2();\n    const allNeedsRes = await useFetch(API_URL_NEEDS);\n    dispatch(loadNeeds(allNeedsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all ods*/\nexport const loadAllODSs = () => {\n  var _s3 = $RefreshSig$();\n  return _s3(async dispatch => {\n    _s3();\n    const allODSRes = await useFetch(API_URL_ODS);\n    dispatch(loadODSs(allODSRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all locations*/\nexport const loadAllLocations = () => {\n  var _s4 = $RefreshSig$();\n  return _s4(async dispatch => {\n    _s4();\n    const allLocationsRes = await useFetch(API_URL_LOCATIONS);\n    dispatch(loadLocations(allLocationsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n\n/*One function to select projects according to the filter*/\nexport const loadProjectsByFilter = (filter, subFilter) => {\n  var _s5 = $RefreshSig$();\n  return _s5(async (dispatch, getState) => {\n    _s5();\n    const actualProjects = await useFetch(API_URL);\n    let filteredProjects = [];\n    let activeMainFilter = '';\n    Object.entries(filter).filter(_ref => {\n      let [val, i] = _ref;\n      if (i === true) {\n        activeMainFilter = val;\n      }\n    });\n    try {\n      actualProjects.data.map(project => {\n        const keys = Object.keys(project);\n        const values = Object.values(project);\n        //**CHECK IF EACH OBJECT INCLUDES THE MAIN FILTER AND IF IT'S AN ARRAY **//\n        if (keys.includes(activeMainFilter) && Array.isArray(project[activeMainFilter])) {\n          for (const keyObj of project[activeMainFilter]) {\n            if (keyObj === subFilter) {\n              filteredProjects.push(project);\n            }\n          }\n          //** IF IS NOT AN ARRAY, JUST CHECK THE VALUE AGAINST THE SUB-FILTER **//\n        } else if (project[activeMainFilter] === subFilter) {\n          filteredProjects.push(project);\n        }\n      });\n      dispatch(loadProjects(filteredProjects));\n    } catch (e) {\n      return console.error(e.message);\n    }\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};","map":{"version":3,"names":["createSlice","axios","all","useFetch","useSelector","API_URL_BASE","API_URL","API_URL_ODS","API_URL_LOCATIONS","API_URL_NEEDS","projectsSlice","name","initialState","allProjects","allODSs","allLocations","allNeeds","reducers","loadProjects","state","action","payload","loadODSs","loadLocations","loadNeeds","reducer","actions","selectAllProjects","projects","selectAllODS","selectAllLocations","selectAllNeeds","loadAllProjects","_s","$RefreshSig$","dispatch","allProjectsRes","data","loadAllNeeds","_s2","allNeedsRes","loadAllODSs","_s3","allODSRes","loadAllLocations","_s4","allLocationsRes","loadProjectsByFilter","filter","subFilter","_s5","getState","actualProjects","filteredProjects","activeMainFilter","Object","entries","_ref","val","i","map","project","keys","values","includes","Array","isArray","keyObj","push","e","console","error","message"],"sources":["/Users/mrm/Documents/TECH/React/Redux/Co-exist/react-express-app/client/src/features/projects/projectSlice.js"],"sourcesContent":["import {createSlice} from '@reduxjs/toolkit';\nimport axios, {all} from 'axios';\nimport {useFetch} from '../../services/useFetch';\nimport {useSelector} from \"react-redux\";\n\nconst API_URL_BASE = \"http://localhost:3000/\";\nconst API_URL = \"http://localhost:3000/projects\";\nconst API_URL_ODS = \"http://localhost:3000/ods\";\nconst API_URL_LOCATIONS = \"http://localhost:3000/locations\";\nconst API_URL_NEEDS = \"http://localhost:3000/needs\";\n\nexport const projectsSlice = createSlice({\n    name: 'projects',\n    initialState: {\n        allProjects: [{}],\n        allODSs:[],\n        allLocations:[],\n        allNeeds:[],\n    },\n    reducers: {\n        loadProjects: (state, action) => {\n            state.allProjects = action.payload;\n        },\n        loadODSs: (state, action) =>{\n            state.allODSs = action.payload;\n        },\n        loadLocations: (state, action) =>{\n            state.allLocations = action.payload;\n        },\n        loadNeeds: (state, action) =>{\n            state.allNeeds = action.payload;\n        }\n    },\n})\n\nexport default projectsSlice.reducer;\nconst {loadProjects, loadODSs, loadLocations,loadNeeds} = projectsSlice.actions;\nexport const selectAllProjects = (state) => state.projects.allProjects;\nexport const selectAllODS = (state) => state.projects.allODSs;\nexport const selectAllLocations = (state) => state.projects.allLocations;\nexport const selectAllNeeds = (state) => state.projects.allNeeds;\n\n/* Action to load all projects from DataBase*/\nexport const loadAllProjects = () => async dispatch => {\n    const allProjectsRes = await useFetch(API_URL);\n    dispatch(loadProjects(allProjectsRes.data));\n}\n/*Action to load all needs*/\nexport const loadAllNeeds = () => async dispatch => {\n    const allNeedsRes = await useFetch(API_URL_NEEDS);\n    dispatch(loadNeeds(allNeedsRes.data));\n}\n/*Action to load all ods*/\nexport const loadAllODSs = () => async dispatch => {\n    const allODSRes = await useFetch(API_URL_ODS);\n    dispatch(loadODSs(allODSRes.data));\n}\n/*Action to load all locations*/\nexport const loadAllLocations = () => async dispatch => {\n    const allLocationsRes = await useFetch(API_URL_LOCATIONS);\n    dispatch(loadLocations(allLocationsRes.data));\n}\n\n/*One function to select projects according to the filter*/\nexport const loadProjectsByFilter = (filter, subFilter) => async (dispatch, getState) => {\n    const actualProjects = await useFetch(API_URL);\n    let filteredProjects =[];\n    let activeMainFilter = '';\n    Object.entries(filter).filter( ([val,i]) => {\n        if(i === true) {\n            activeMainFilter= val;\n        }\n    });\n    try{\n        actualProjects.data.map( project => {\n            const keys = Object.keys(project);\n            const values = Object.values(project);\n            //**CHECK IF EACH OBJECT INCLUDES THE MAIN FILTER AND IF IT'S AN ARRAY **//\n            if(keys.includes(activeMainFilter) && Array.isArray(project[activeMainFilter])){\n                for (const keyObj of project[activeMainFilter]) {\n                    if(keyObj === subFilter){\n                        filteredProjects.push(project);\n                    }\n                }\n                //** IF IS NOT AN ARRAY, JUST CHECK THE VALUE AGAINST THE SUB-FILTER **//\n            }else if(project[activeMainFilter] === subFilter){\n                filteredProjects.push(project);\n            }\n        });\n        dispatch(loadProjects(filteredProjects));\n    }catch(e){\n        return console.error(e.message);\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}