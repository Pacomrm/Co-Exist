{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios, { all } from 'axios';\nimport { useFetch } from '../../services/useFetch';\nimport { useSelector } from \"react-redux\";\nconst API_URL_BASE = \"http://localhost:3000/\";\nconst API_URL = \"http://localhost:3000/projects\";\nconst API_URL_ODS = \"http://localhost:3000/ods\";\nconst API_URL_LOCATIONS = \"http://localhost:3000/locations\";\nconst API_URL_NEEDS = \"http://localhost:3000/needs\";\nexport const projectsSlice = createSlice({\n  name: 'projects',\n  initialState: {\n    allProjects: [{}],\n    allODSs: [],\n    allLocations: [],\n    allNeeds: []\n  },\n  reducers: {\n    loadProjects: (state, action) => {\n      state.allProjects = action.payload;\n    },\n    loadODSs: (state, action) => {\n      state.allODSs = action.payload;\n    },\n    loadLocations: (state, action) => {\n      state.allLocations = action.payload;\n    },\n    loadNeeds: (state, action) => {\n      state.allNeeds = action.payload;\n    }\n  }\n});\nexport default projectsSlice.reducer;\nconst {\n  loadProjects,\n  loadODSs,\n  loadLocations,\n  loadNeeds\n} = projectsSlice.actions;\nexport const selectAllProjects = state => state.projects.allProjects;\nexport const selectAllODS = state => state.projects.allODSs;\nexport const selectAllLocations = state => state.projects.allLocations;\nexport const selectAllNeeds = state => state.projects.allNeeds;\n\n/* Action to load all projects initially */\nexport const loadAllProjects = () => {\n  var _s = $RefreshSig$();\n  return _s(async dispatch => {\n    _s();\n    const allProjectsRes = await useFetch(API_URL);\n    dispatch(loadProjects(allProjectsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all needs*/\nexport const loadAllNeeds = () => {\n  var _s2 = $RefreshSig$();\n  return _s2(async dispatch => {\n    _s2();\n    const allNeedsRes = await useFetch(API_URL_NEEDS);\n    dispatch(loadNeeds(allNeedsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all ods*/\nexport const loadAllODSs = () => {\n  var _s3 = $RefreshSig$();\n  return _s3(async dispatch => {\n    _s3();\n    const allODSRes = await useFetch(API_URL_ODS);\n    dispatch(loadODSs(allODSRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n/*Action to load all locations*/\nexport const loadAllLocations = () => {\n  var _s4 = $RefreshSig$();\n  return _s4(async dispatch => {\n    _s4();\n    const allLocationsRes = await useFetch(API_URL_LOCATIONS);\n    dispatch(loadLocations(allLocationsRes.data));\n  }, \"WM4OL7CqgzjgXHJL6SXd6kRTA8w=\", false, function () {\n    return [useFetch];\n  });\n};\n\n/*One function to select projects according to the filter*/\nexport const loadProjectsByFilterArray = (name, filterType) => {\n  var _s5 = $RefreshSig$();\n  return _s5(async dispatch => {\n    _s5();\n    try {\n      const actualProjects = useSelector(selectAllProjects);\n      console.log(actualProjects);\n      let categoryFilter = [];\n      categoryFilter = Object.entries(filterType).filter(_ref => {\n        let [val, i] = _ref;\n        return i === true;\n      });\n      let filterFinal = categoryFilter[0][0];\n      const allProjects = await axios.get(`${API_URL}`);\n      let projectsFiltered = [];\n      allProjects.data.map(project => {\n        project[filterFinal].map(o => {\n          if (o === name) {\n            projectsFiltered.push(project);\n          }\n        });\n      });\n      dispatch(loadProjects(projectsFiltered));\n    } catch (e) {\n      return console.error(e.message);\n    }\n  }, \"CyiLEhrbK7IaAKXizNDX31rRy3c=\", false, function () {\n    return [useSelector];\n  });\n};\n\n/*Action to get projects by ODS*/\nexport const loadProjectsByLocation = locationName => {\n  return async (dispatch, getState) => {\n    const allProjects = getState();\n    console.log(allProjects);\n    let projectsByLocation = [];\n    // allProjects.map( project => {\n    //     console.log(project.location);\n    //     if(project.location === locationName){\n    //         projectsByLocation.push(project);\n    //     }\n    // })\n    // dispatch(loadProjects(projectsByLocation));\n  };\n};","map":{"version":3,"names":["createSlice","axios","all","useFetch","useSelector","API_URL_BASE","API_URL","API_URL_ODS","API_URL_LOCATIONS","API_URL_NEEDS","projectsSlice","name","initialState","allProjects","allODSs","allLocations","allNeeds","reducers","loadProjects","state","action","payload","loadODSs","loadLocations","loadNeeds","reducer","actions","selectAllProjects","projects","selectAllODS","selectAllLocations","selectAllNeeds","loadAllProjects","_s","$RefreshSig$","dispatch","allProjectsRes","data","loadAllNeeds","_s2","allNeedsRes","loadAllODSs","_s3","allODSRes","loadAllLocations","_s4","allLocationsRes","loadProjectsByFilterArray","filterType","_s5","actualProjects","console","log","categoryFilter","Object","entries","filter","_ref","val","i","filterFinal","get","projectsFiltered","map","project","o","push","e","error","message","loadProjectsByLocation","locationName","getState","projectsByLocation"],"sources":["/Users/mrm/Documents/TECH/React/Redux/Co-exist/react-express-app/client/src/features/projects/projectSlice.js"],"sourcesContent":["import {createSlice} from '@reduxjs/toolkit';\nimport axios, {all} from 'axios';\nimport {useFetch} from '../../services/useFetch';\nimport {useSelector} from \"react-redux\";\n\nconst API_URL_BASE = \"http://localhost:3000/\";\nconst API_URL = \"http://localhost:3000/projects\";\nconst API_URL_ODS = \"http://localhost:3000/ods\";\nconst API_URL_LOCATIONS = \"http://localhost:3000/locations\";\nconst API_URL_NEEDS = \"http://localhost:3000/needs\";\n\nexport const projectsSlice = createSlice({\n    name: 'projects',\n    initialState: {\n        allProjects: [{}],\n        allODSs:[],\n        allLocations:[],\n        allNeeds:[],\n    },\n    reducers: {\n        loadProjects: (state, action) => {\n            state.allProjects = action.payload;\n        },\n        loadODSs: (state, action) =>{\n            state.allODSs = action.payload;\n        },\n        loadLocations: (state, action) =>{\n            state.allLocations = action.payload;\n        },\n        loadNeeds: (state, action) =>{\n            state.allNeeds = action.payload;\n        }\n    },\n})\n\nexport default projectsSlice.reducer;\nconst {loadProjects, loadODSs, loadLocations,loadNeeds} = projectsSlice.actions;\nexport const selectAllProjects = (state) => state.projects.allProjects;\nexport const selectAllODS = (state) => state.projects.allODSs;\nexport const selectAllLocations = (state) => state.projects.allLocations;\nexport const selectAllNeeds = (state) => state.projects.allNeeds;\n\n/* Action to load all projects initially */\nexport const loadAllProjects = () => async dispatch => {\n    const allProjectsRes = await useFetch(API_URL);\n    dispatch(loadProjects(allProjectsRes.data));\n}\n/*Action to load all needs*/\nexport const loadAllNeeds = () => async dispatch => {\n    const allNeedsRes = await useFetch(API_URL_NEEDS);\n    dispatch(loadNeeds(allNeedsRes.data));\n}\n/*Action to load all ods*/\nexport const loadAllODSs = () => async dispatch => {\n    const allODSRes = await useFetch(API_URL_ODS);\n    dispatch(loadODSs(allODSRes.data));\n}\n/*Action to load all locations*/\nexport const loadAllLocations = () => async dispatch => {\n    const allLocationsRes = await useFetch(API_URL_LOCATIONS);\n    dispatch(loadLocations(allLocationsRes.data));\n}\n\n/*One function to select projects according to the filter*/\nexport const loadProjectsByFilterArray = (name,filterType) => async dispatch => {\n    try{\n        const actualProjects = useSelector(selectAllProjects);\n        console.log(actualProjects);\n        let categoryFilter = [];\n        categoryFilter = Object.entries(filterType).filter( ([val,i]) => i === true);\n        let filterFinal = categoryFilter[0][0];\n\n        const allProjects = await axios.get(`${API_URL}`);\n        let projectsFiltered =[];\n        allProjects.data.map( project => {\n            project[filterFinal].map( o => {\n                if(o === name){\n                    projectsFiltered.push(project);\n                }\n            })\n        })\n        dispatch(loadProjects(projectsFiltered));\n\n    }catch(e){\n        return console.error(e.message);\n    }\n}\n\n/*Action to get projects by ODS*/\nexport const loadProjectsByLocation = (locationName) => {\n    return async (dispatch, getState) => {\n        const allProjects = getState();\n        console.log(allProjects);\n        let projectsByLocation =[];\n        // allProjects.map( project => {\n        //     console.log(project.location);\n        //     if(project.location === locationName){\n        //         projectsByLocation.push(project);\n        //     }\n        // })\n        // dispatch(loadProjects(projectsByLocation));\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}